group:
  harbor:
    exists: true
user:
  harbor:
    exists: true
command:
  check-system-cert-paths:
    exec: ls -dl /etc/ssl/certs /etc/pki/tls/certs/ 2>/dev/null | grep "drwxrwxr-x.*harbor"
    exit-status: 0
  check-permissions-system-certs:
    exec: if (test -f /etc/ssl/certs/ca-certificates.crt && (ls -ld /etc/ssl/certs/ca-certificates.crt | cut --delimiter=' ' --fields=3 | grep 'harbor')); then echo "File exists"; fi || if (test -f /etc/pki/tls/certs/ca-bundle.crt && (ls -ld /etc/pki/tls/certs/ca-bundle.crt | cut --delimiter=' ' --fields=3 | grep 'harbor')); then echo "File exists"; fi || if (test -f /etc/pki/tls/certs/ca-bundle.trust.crt && (ls -ld /etc/pki/tls/certs/ca-bundle.trust.crt | cut --delimiter=' ' --fields=3 | grep 'harbor')); then echo "File exists"; fi
    exit-status: 0