file:
  /opt/bitnami/redis/etc/redis.conf:
    exists: true
    mode: "0664"
    contains:
      - /port.*6379/
      - /dir.*/bitnami/redis/data/
      - /pidfile.*/opt/bitnami/redis/tmp/redis.pid/
      - daemonize yes
command:
  check-redis-server:
    exec: timeout 5s redis-server || true
    exit-status: 0
    stdout:
      - Ready to accept connections
  check-redis-server-ssl:
    exec: ldd /opt/bitnami/redis/bin/redis-server
    exit-status: 0
    stdout:
      - libcrypto.so
      - libssl.so
  check-redis-cli-ssl:
    exec: ldd /opt/bitnami/redis/bin/redis-cli
    exit-status: 0
    stdout:
      - libcrypto.so
      - libssl.so
