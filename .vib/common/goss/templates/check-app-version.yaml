########################
# Checks asset version via its binary
# Needed vars:
#   - .Vars.version.bin_name (String)
#   - .Vars.version.flag (String)
########################
command:
  check-app-version:
    exec: {{ .Vars.version.bin_name }} {{ .Vars.version.flag }}
    exit-status: 0
    {{- if and (index .Vars.version "useStderr") .Vars.version.useStderr }}
    stderr:
    - {{ .Env.APP_VERSION }}
    {{- else }}
    stdout:
    - {{ .Env.APP_VERSION }}
    {{- end }}
